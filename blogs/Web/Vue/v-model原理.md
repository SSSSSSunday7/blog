---
title: ref和$refs
sidebar: 'auto' date: 2023-11-19
tags:
- vue
categories: 
 - Vue 
---
# v-model原理

> v-model的本质是一个语法糖，例如应用在输入框上就是value属性和input事件的合写

提供了数据的双向绑定

数据变视图也跟着变`:value`，

视图变数据也跟着变`@input`。

![image-20231012144529570](/image-20231012144529570.png)

## 1.input框的v-model详解

### 1.1 @input

@input是一个事件，只要输入的值变化了就触发，所以第二个input框的事件是**每当输入变化，就更新当前输入框的值给msg**。

注意的是，当前输入框的值是`$event.target.value`，我们通常拿事件是通过事件返回的e对象来操作的，

但是这里没有函数来指定对象e，所以需要用`$event`来指定该事件的对象。

### 1.2 :value 

`:value`指的是当前input的值和msg绑定了，也就是数据变了视图也更新，但是**只更新视图的时候并不会改变数据**，所以需要@input

## 2.表单类组件 & v-model

![image-20231012150257905](/image-20231012150257905.png)

### 2.1父传子

数据应该是在父组件里，因为表单数据需要提交，所以通过父传子传过去。

但是数据是在父组件处，所以需要将v-model拆解绑定数据

### 2.2 子传父

需要监听输入，通过子传父的写法给父组件传值

![image-20231012151111464](/image-20231012151111464.png)

可以理解成`:value`和`@事件名`都是一个单向数据流

:value只能流向视图，而视图无法流入:value，:value绑定数据，每次数据改变了对应的视图改变

而`@事件名`则是**视图对应这个元素的数据**改变时，去同步改变数据，但是数据改变时，因为没有触发事件，所以数据不会影响视图

### 2.3 简化

以下都是固定写法

+ 父组件：![image-20231012154133147](/image-20231012154133147.png)

+ 子组件![image-20231012154347875](/image-20231012154347875.png)![image-20231012154529658](/image-20231012154529658.png)

  事件名是固定为input的，props的值也默认为value