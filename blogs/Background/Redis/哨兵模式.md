---
title: 哨兵模式
sidebar: 'auto' date: 2023-11-19
tags:
- redis
categories: 
 - redis
---
# 哨兵模式

> 虽然主从模式已经提高了可用性，但是如果主节点宕机了还是要手动提升从节点为主节点，这样离高可用还是差远了，哨兵模式就是自动实现故障转移的解决方案

哨兵会以一个独立进程运行在redis集群中

一般会配置三个哨兵节点，他们自己会选举领导者

主要执行下面几个功能：

+ **监控：不断的发送命令来检查redis节点是否正常**
+ **通知：如果某个节点出现问题,哨兵就会通过发布订阅模式来通知其他节点**
+ **自动故障转移：当主节点不能正常工作时，自动将一个节点提升为新的主节点，然后再将其他的从节点指向新的主节点**

## 配置

> 先在redis集群中先配置一个redis节点作为哨兵节点

可以使用`redis-sentinel 配置文件`来启动哨兵节点，需要添加一个配置文件`sentinel.conf`

```
sentinel monitor master host port 1
#这里的master是监控的主节点名称,可以自己定义
#最后的1表示只要一个哨兵节点同意就可以进行故障转移

```

