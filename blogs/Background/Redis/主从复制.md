---
title: 主从复制
sidebar: 'auto' date: 2023-11-19
tags:
- redis
categories: 
 - redis
---
# 主从复制

> 指将一台redis服务器的数据复制到其他redis服务器，也叫主节点和从节点，一个主节点可以有多个从节点

一般来说，主节点负责写操作，从节点负责读操作，

主节点把自己的数据变化通过异步方式发送给从节点，从节点接到主节点的数据后更新自己的数据，这样就达到了数据一致的目的。

 ## 1、配置

**主节点不需要修改任何配置**，只需要修改从节点配置就行了，只要主从关系确定就会自动同步数据

**一种是通过命令行执行命令**，

`role`查看当前节点角色

`replicaof host port`或者`slaveof host port(旧版)`

用得少

**另一种是通过配置文件来修改，**

如果想在一个电脑上运行两个redis

首先需要修改配置文件的

+ 端口号
+ pidfile（进程文件）
+ dbfilename（持久化文件）

修改成和主节点不同的就行了

**指定主节点**：

找到在配置文件里找到`replicaof `，默认是注释掉的

例如`replicaof 127.0.0.1 6379 `第一个参数是主机名，第二个是端口号